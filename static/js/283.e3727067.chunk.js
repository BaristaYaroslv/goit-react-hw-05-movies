"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[283],{5283:function(e,t,n){n.r(t),n.d(t,{default:function(){return p}});var r=n(5861),a=n(9439),i=n(4687),u=n.n(i),s=n(7689),c=n(2791),o=n(7035),f=n(184),l=function(e){var t=e.reviews;return(0,f.jsx)("ul",{children:t.map((function(e){return(0,f.jsxs)("li",{children:[(0,f.jsxs)("h4",{children:["Author: ",e.name]}),(0,f.jsx)("p",{children:e.content})]},e.id)}))})},h=new(n(6990).Z),p=function(){var e=(0,c.useState)(!1),t=(0,a.Z)(e,2),n=t[0],i=t[1],p=(0,s.UO)().movieId,v=(0,c.useState)([]),d=(0,a.Z)(v,2),g=d[0],m=d[1];return(0,c.useEffect)((function(){var e=new AbortController;function t(e){return e.map((function(e){return{name:e.author_details.username,content:e.content}}))}function n(){return(n=(0,r.Z)(u().mark((function n(){var r;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i(!0),n.prev=1,n.next=4,h.fetchReviewsFromFilm(p,e);case 4:r=n.sent,m(t(r.results)),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(1),m([]),console.log("Error fetch");case 12:return n.prev=12,i(!1),n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[1,8,12,15]])})))).apply(this,arguments)}return function(){n.apply(this,arguments)}(),function(){e.abort()}}),[p]),(0,f.jsxs)(f.Fragment,{children:[n&&(0,f.jsx)(o.Z,{}),!n&&0===g.length&&(0,f.jsx)("p",{children:"We don't have any reviews for this movie."}),!n&&g.length>0&&(0,f.jsx)(l,{reviews:g})]})}},6990:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(5861),a=n(5671),i=n(9466),u=n(6274),s=n(9359),c=n(4687),o=n.n(c),f=n(1243),l=(0,s.Z)("KEY"),h=(0,s.Z)("URL"),p=function(){function e(){(0,a.Z)(this,e),Object.defineProperty(this,l,{writable:!0,value:"79054ab6d7c73d62d26a93a0f299cea4"}),Object.defineProperty(this,h,{writable:!0,value:"https://api.themoviedb.org/3/"}),this.API=f.Z.create({baseURL:(0,u.Z)(this,h)[h],header:{},params:{api_key:(0,u.Z)(this,l)[l]}}),this.configImages=null,this.listGenge=null}return(0,i.Z)(e,[{key:"searchFilm",value:function(){var e=(0,r.Z)(o().mark((function e(){var t,n,r,a,i,u,s=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(t=s.length>0&&void 0!==s[0]?s[0]:{}).nameFilms,r=t.controller,a=t.page,i=void 0===a?1:a,e.next=3,this.API.get("search/movie",{params:{signal:r.signal,query:n,page:i}});case 3:return u=e.sent,e.abrupt("return",null===u||void 0===u?void 0:u.data);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrending",value:function(){var e=(0,r.Z)(o().mark((function e(){var t,n,r,a,i,u,s,c=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(t=c.length>0&&void 0!==c[0]?c[0]:{}).controller,r=t.page,a=void 0===r?1:r,i=t.time_window,u=void 0===i?"day":i,e.next=3,this.API.get("/trending/movie/".concat(u),{params:{signal:n.signal,page:a}});case 3:return s=e.sent,e.abrupt("return",null===s||void 0===s?void 0:s.data);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchFullInformationFromFilm",value:function(){var e=(0,r.Z)(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.API.get("/movie/".concat(t),{params:{signal:n.signal}});case 2:return r=e.sent,e.abrupt("return",null===r||void 0===r?void 0:r.data);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchCreditsFromFilm",value:function(){var e=(0,r.Z)(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.API.get("/movie/".concat(t,"/credits"),{params:{signal:n.signal}});case 2:return r=e.sent,e.abrupt("return",null===r||void 0===r?void 0:r.data);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchReviewsFromFilm",value:function(){var e=(0,r.Z)(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.API.get("/movie/".concat(t,"/reviews"),{params:{signal:n.signal}});case 2:return r=e.sent,e.abrupt("return",null===r||void 0===r?void 0:r.data);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getUrlImage",value:function(){var e=(0,r.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getConfigurationImages();case 2:return n=e.sent,e.abrupt("return","".concat(n.base_url).concat(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfigurationImages",value:function(){var e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.configImages){e.next=2;break}return e.abrupt("return",this.configImages);case 2:return e.next=4,this.fetchConfiguration();case 4:return this.configImages=e.sent,e.abrupt("return",this.configImages);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchConfiguration",value:function(){var e=(0,r.Z)(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.API.get("/configuration");case 2:return n=e.sent,e.abrupt("return",null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.images);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getGendeText",value:function(e){return e.reduce((function(e,t){return e+(""===e?"":", ")+t.name}),"")}}]),e}()}}]);
//# sourceMappingURL=283.e3727067.chunk.js.map